<?php

namespace Setting\Bundle\ContentBundle\Repository;
use Doctrine\ORM\EntityRepository;

/**
 * ModuleCategoryRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ModuleCategoryRepository extends EntityRepository
{

    public function moduleBaseCategory($globalOption,$module)
    {
        $em = $this->_em;

        $repository = $em->getRepository('SettingContentBundle:ModuleCategory');
        $query = $repository->createQueryBuilder('mc')
            ->innerJoin('mc.module', 'module')
            ->where('mc.globalOption = :option')
            ->setParameter('option', $globalOption)
            ->andWhere('module.id = :module_id')
            ->setParameter('module_id', $module)
            ->getQuery()->getResult();

        return $query;

    }

    public function getFeatureModuleCategory($globalOption,$limit)
    {

        $em = $this->_em;
        $repository = $em->getRepository('SettingContentBundle:ModuleCategory');
        $query = $repository->createQueryBuilder('mc')
            ->where('mc.globalOption = :option')
            ->setParameter('option', $globalOption)
            ->setMaxResults($limit)
            ->getQuery()->getResult();
            return $query;

    }
}
