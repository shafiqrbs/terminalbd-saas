<?php

namespace Appstore\Bundle\MedicineBundle\Repository;


use Appstore\Bundle\MedicineBundle\Entity\MedicineGeneric;
use Doctrine\ORM\EntityRepository;

/**
 * GenericRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class MedicineGenericRepository extends EntityRepository
{
    public function checkGenericName($name){

        $generic = $this->findOneBy(array('name'=>$name));
        $em = $this->_em;
        if(empty($generic)){
            $entity = new MedicineGeneric();
            $entity->setName($name);
            $em->persist($entity);
            $em->flush();
            return $entity;
        }else{
          return $generic;
        }
    }
}
