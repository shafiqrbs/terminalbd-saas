<?php

namespace Appstore\Bundle\EcommerceBundle\Repository;
use Appstore\Bundle\EcommerceBundle\Entity\Order;
use Appstore\Bundle\EcommerceBundle\Entity\OrderPayment;
use Appstore\Bundle\EcommerceBundle\Entity\PreOrder;
use Doctrine\ORM\EntityRepository;

/**
 * OrderPaymentRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class OrderPaymentRepository extends EntityRepository
{

    public function updateOrderPayment(Order $order)
    {
        $em = $this->_em;
        foreach ($order->getOrderPayments() as $item){

            /* @var $item OrderPayment */

            if($item->getStatus() == 0 ){
                $item->setStatus(1);
                $em->persist($item);
                $em->flush($item);
            }
        }
    }

}
