<?php

namespace Appstore\Bundle\EcommerceBundle\Repository;
use Appstore\Bundle\EcommerceBundle\Entity\EcommerceConfig;
use Doctrine\ORM\EntityRepository;

/**
 * TemplateRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TemplateRepository extends EntityRepository
{

    public function setDivOrdering($data)
    {

        $i = 1;
        $em = $this->_em;
        $qb = $em->createQueryBuilder();

        foreach ($data as $key => $value){

            $qb->update('EcommerceBundle:Template', 'mg')
                ->set('mg.sorting', $i)
                ->where('mg.id = :id')
                ->setParameter('id', $value)
                ->getQuery()
                ->execute();
            $i++;

        }


    }

    public function setDivResize($data)
    {

        $em = $this->_em;
        $qb = $em->createQueryBuilder();
        $qb->update('EcommerceBundle:Template', 'mg')
            ->set('mg.divWidth', $data['width'])
            ->set('mg.divHeight', $data['height'])
            ->where('mg.id = :id')
            ->setParameter('id', $data['id'])
            ->getQuery()
            ->execute();
    }
}
