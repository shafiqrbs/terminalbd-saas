<?php

namespace Appstore\Bundle\InventoryBundle\Repository;
use Doctrine\ORM\EntityRepository;

/**
 * ColorSizeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ColorSizeRepository extends EntityRepository
{
    public function getLastId($inventory,$type)
    {
        $qb = $this->_em->createQueryBuilder();
        $qb->select('count(cs)');
        $qb->from('InventoryBundle:ColorSize','cs');
        $qb->where("cs.type = :type");
        $qb->setParameter('type', $type);
        $qb->andWhere("cs.inventoryConfig = :inventory");
        $qb->setParameter('inventory', $inventory);
        $count = $qb->getQuery()->getSingleScalarResult();
        if($count > 0 ){
            return $count+1;
        }else{
            return 1;
        }

    }
}
