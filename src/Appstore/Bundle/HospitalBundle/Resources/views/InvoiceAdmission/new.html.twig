{% extends '::base.html.twig' %}

{% block body %}
    <div class="container-fluid">
    <!-- BEGIN category HEADER-->
    <div class="row-fluid">
        <div class="span12">
            <h3 class="category-title">
                Patient Admission
            </h3>
            <ul class="breadcrumb">
                <li>
                    <i class="icon-home"></i>
                    <a href="{{ path('homepage') }}">Home</a>
                    <span class="icon-angle-right"></span>
                </li>
                <li>
                    <a href="{{ path('hms_invoice_admission') }}">Patient Admission</a>
                    <span class="icon-angle-right"></span>
                </li>
                <li><a href="#">Manage Patient Admission</a></li>
                <li class="pull-right btn blue disabled mini">
                    <i class="fa fa-calendar"></i>
                    {{ "now"|date("d-F-Y") }}
                </li>
            </ul>
        </div>
    </div>
    <!-- END category HEADER-->
    <!-- BEGIN category CONTENT-->
    <div class="row-fluid">
    <div class="span12">

    <div class="portlet box green tabbable">
        <div class="portlet-title">
            <div class="caption"><i class="icon-reorder"></i>Patient Admission Information</div>
            <div class="actions">
                <div class="btn-group">
                    <a class="btn red" href="{{ path('hms_invoice_admission_new') }}"><i class="icon-plus-sign"></i> New Admission</a>
                    <a class="btn" href="{{ path('hms_invoice_admission') }}"><i class="icon-th-list"></i> Admission</a>
                  {#  <a class="btn black patientShow"><span class="fa fa-angle-double-up"></span>&nbsp;Show</a>#}
                </div>
            </div>
        </div>
    <div class="portlet-body">
        <div class="portlet-body form"  >
            {% include('flash-message.html.twig')  %}
            <!-- BEGIN FORM-->

            <div class="row-fluid" >
                <form action="{{ path('hms_invoice_admission_old_patient') }}" method="post" class="patient-search">
                    <div class="row-fluid">
                        <div class="span9">
                            <input type="text" id="customer" name="customer"  class="leftMargin span12 select2Customer m-wrap" value="{% if searchForm.mobile is defined %}{{ searchForm.mobile }}{% endif %}"  autocomplete="off" placeholder="Customer mobile no">
                        </div>
                        <div class="span3">
                            <div class="controls">
                                <div class="input-append span12">
                                    <input type="text" id="invoice" name="invoice"  class="m-wrap span10" value="{% if searchForm.invoice is defined %}{{ searchForm.invoice }}{% endif %}"  autocomplete="off" placeholder="{% if searchForm.invoice is defined %}{{ searchForm.invoice }}{% else %}Patient invoice no{% endif %} ">
                                    <div class="btn-group">
                                        <button class="btn blue" type="submit"><i class="icon-plus-sign"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

                {{ form_start(form) }}
                {{ form_row(form._token) }}
                <div class="row-fluid">
                <div class="form-actions portlet box blue">
                    <div class="portlet-title">
                        <div class="caption"><i class="icon-reorder"></i>Personnel</div>
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <div class="row-fluid">
                    <div class="span6">
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Patient Name<span class="required">*</span></span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.name) }}
                                        {{ form_errors(form.customer.name) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Cabin/Ward/Bed<span class="required">*</span></span></label>
                                    <div class="controls select-error-tooltip">
                                        {{ form_widget(form.cabin) }}
                                        {{ form_errors(form.cabin) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName">Age & Date of Birth<span class="required">*</span></label>
                                    <div class="controls">
                                        <div class="row-fluid">
                                        <span class="span6">
                                              {{ form_widget(form.customer.age) }}
                                            {{ form_widget(form.customer.ageType) }}
                                        </span>
                                        <span class="span6">
                                            {{ form_widget(form.customer.dob) }}
                                        </span>
                                        </div>
                                    </div>
                                    {{ form_errors(form.customer.age) }}
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Gender & Marital</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.gender) }}
                                        {{ form_widget(form.customer.maritalStatus) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Blood Group</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.bloodGroup) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="span6">
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Mobile no</span><span class="required">*</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.mobile) }}
                                        {{ form_errors(form.customer.mobile) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Father & Mother Name</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.fatherName) }}
                                        {{ form_widget(form.customer.motherName) }}
                                        {{ form_errors(form.customer.fatherName) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Guardian & Mobile</span><span class="required">*</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.alternativeContactPerson) }}
                                        {{ form_widget(form.customer.alternativeContactMobile) }}
                                        {{ form_errors(form.customer.alternativeContactPerson) }}
                                        {{ form_errors(form.customer.alternativeContactMobile) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Relation with Patient</span><span class="required">*</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.alternativeRelation) }}
                                        {{ form_errors(form.customer.alternativeRelation) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Profession</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.customer.profession) }}
                                        {{ form_errors(form.customer.profession) }}
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <div class="form-actions portlet box green">
                    <div class="portlet-title">
                        <div class="caption"><i class="icon-reorder"></i>Patient Information</div>
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <div class="row-fluid">

                    <div class="span6">

                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Assign Doctor</span><span class="required">*</span></label>
                                    <div class="controls select-error-tooltip">
                                        {{ form_widget(form.assignDoctor) }}
                                        {{ form_errors(form.assignDoctor) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Referred</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.referredDoctor) }}
                                        {{ form_errors(form.referredDoctor) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Assistant Doctor</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.assistantDoctor) }}
                                        {{ form_errors(form.assistantDoctor) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Anesthesia Doctor</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.anesthesiaDoctor) }}
                                        {{ form_errors(form.anesthesiaDoctor) }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Department</span><span class="required">*</span></label>
                                    <div class="controls select-error-tooltip">
                                        {{ form_widget(form.department) }}
                                        {{ form_errors(form.department) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="span6">
                        {% if hospital.marketingExecutive == 1 %}
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName">Marketing Executive</label>
                                    <div class="controls select-error-tooltip">
                                        {{ form_widget(form.marketingExecutive) }}
                                        {{ form_errors(form.marketingExecutive) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for="firstName"><span>Diseases Profile <span class="required">*</span></span></label>
                                    <div class="controls select-error-tooltip">
                                        {{ form_widget(form.diseasesProfile) }}
                                        {{ form_errors(form.diseasesProfile) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label red" for=""><span>Disease Description</span></label>
                                    <div class="controls">
                                        {{ form_widget(form.disease) }}
                                        {{ form_errors(form.disease) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <div class="form-actions portlet box blue">
                    <div class="portlet-title">
                        <div class="caption"><i class="icon-reorder"></i>Address</div>
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <div class="row-fluid">
                    <div class="span4">
                        <div class="control-group">
                            <label class="control-label red" for="firstName"><span>Religion</span></label>
                            <div class="controls">
                                {{ form_widget(form.customer.religion) }}
                            </div>
                        </div>
                    </div>
                    <div class="span8">
                        <div class="control-group">
                            <label class="control-label red" for="firstName"><span>Location</span></label>
                            <div class="controls">
                                {{ form_widget(form.customer.location) }}
                                {{ form_errors(form.customer.location) }}
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row-fluid">
                    <div class="span4">
                        <div class="control-group">
                            <label class="control-label red" for="firstName"><span>Nationality</span></label>
                            <div class="controls">
                                {{ form_widget(form.customer.nationality) }}
                            </div>
                        </div>
                    </div>
                    <div class="span8">
                        <div class="control-group">
                            <label class="control-label red" for="firstName"><span>Address</span></label>
                            <div class="controls">
                                {{ form_widget(form.customer.address) }}
                                {{ form_errors(form.customer.address) }}
                            </div>
                        </div>
                    </div>

                </div>
                <div class="form-actions portlet box grey">
                    <div class="pull-right">
                        <button type="submit" class="btn green"><i class="icon-save"></i>  Save & Continue</button>
                    </div>
                </div>
            </div>
                {{ form_end(form) }}
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div id="cabinInvalid" style="display: none">This cabin already booked for another patient.</div>
 <style>
     .sales-right input[class*="span"].m-wrap {
         font-weight: bold;
         margin-top: -1px;
         text-align: right;
         border: 2px solid #4b8df8!important;
         height: 23px!important;
     }
 </style>
 <style>
        .particular-info{
            margin-left: -10px!important;
            padding-left: 15px;
        }
        input.m-wrap , select.m-wrap , textarea.m-wrap{
            border: 2px solid #386fc0!important;
        }
        .label-custom{
            background: #386fc0;
            padding: 0px;
            width: 190px;
            display: inline-block;
            text-align: right;
            padding-right: 15px;
            color: #ffffff;
        }
        .sales-right input[class*="span"].payment{
            border: 3px solid red!important;
            height: 31px!important;
            font-size: 20px
        }
        .address{
            background: #ffffff!important;
        }
        .select2-container{
            border: 2px solid #386fc0!important;
        }
        .bankHide , .mobileBankHide , .customer{
            display: none;
        }
        .dialogModal{
            z-index: 9999!important;
        }
        #calBorder, .select2-drop , .select2-drop-mask{
            z-index: 99999!important;
        }
        .select2-container .select2-choice {
            height: 28px!important;
        }
        form.patient-search{
            background: #386fc0;
            padding: 10px!important;
            margin-bottom: 5px!important;
            padding-bottom: 0!important;
        }
        .dob select{
            border: 2px solid #386fc0!important;
            height: 34px!important;
        }
    </style>
{% endblock %}
{% block cssBlock %}
{% stylesheets filter='cssrewrite'
    '@HospitalBundle/Resources/public/css/admission.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock  %}
{#{% block javascriptBlock %}
    {{ parent() }}
    {% javascripts
    '@HospitalBundle/Resources/public/js/admission.js'
    '@HospitalBundle/Resources/public/js/approveProcess.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock  %}#}
{% block documentready %}
    {{ parent() }}
    var url ="{{ path('hms_invoice_admission_newpatint_cabin') }}";
    var cabin = $('#invoice_cabin').val();
    if(cabin == ''){
        return false;
    }
    $.post( url,{cabin:cabin } )
    .done(function( data ) {
    if(data == 'invalid'){
    $("#invoice_cabin").select2("val","");
    $('#cabinInvalid').notifyModal({
    duration : 5000,
    placement : 'center',
    overlay : true,
    type : 'notify',
    icon : false,
    });
    }
    });
{% endblock %}
